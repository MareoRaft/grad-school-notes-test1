\documentclass[11pt]{book}

\usepackage[margin=1.0in]{geometry}

\usepackage{amsmath,amssymb,amsthm}

\usepackage{mathrsfs}
%\usepackage{dsfont}
\usepackage{times}
\usepackage{epsfig}
\usepackage{enumitem}
\usepackage{mathabx}

\usepackage{csquotes}
\MakeOuterQuote{"}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{setspace}

\usepackage{tikz}
\usepackage{tikz-cd}
\usepackage{pgfplots}

\usepackage{etoolbox,xparse}
\usepackage{float}
\floatstyle{plain}%boxed
\restylefloat{figure}
\usepackage{chngcntr}
\counterwithin{chapter}{part}

\newcounter{counter}


\newtheorem{theorem}[counter]{Theorem}   \newtheorem*{theorem*}{Theorem}   \newtheorem{lemma}[counter]{Lemma}   \newtheorem{corollary}[counter]{Corollary}
\newtheorem{proposition}[counter]{Proposition}   \newtheorem{problem}[counter]{Problem}   \newtheorem*{proposition*}{Proposition}   \newtheorem*{lemma*}{Lemma}

\theoremstyle{definition}   \newtheorem{defn}[counter]{Definition} %These theorem environments are not numbered separately
\newtheorem*{defn*}{Definition}
\newtheorem{blank}[counter]{}   \newtheorem{remark}[counter]{Remark(s)}   \newtheorem*{remark*}{Remark(s)}   \newtheorem{generalization}[counter]{Generalization}
\newtheorem{consequence}[counter]{Consequence(s)}   \newtheorem*{consequence*}{Consequence(s)}   \newtheorem*{problem*}{Problem}   \newtheorem{notation}[counter]{Notation}
\newtheorem*{notation*}{Notation}   \newtheorem{example}[counter]{Example(s)}   \newtheorem*{example*}{Example(s)}   \newtheorem*{warning}{Warning} \newtheorem*{corollary*}{Corollary}
\newtheorem*{question}{Question}   \newtheorem*{answer}{Answer}   \newtheorem{modification}[counter]{Modification}   \newtheorem{numitem}[counter]{}

\newcommand{\ov}{\overline}   \newcommand{\wt}{\widetilde}
\newcommand{\blt}{$\bullet$}   \newcommand{\tn}{\textnormal}   \newcommand{\tb}{\textbf}   \newcommand{\mbb}{\mathbb}
\newcommand{\bs}{\backslash}   \newcommand{\A}{\mathcal{A}}   \newcommand{\sy}{\textnormal{Syl}}   \newcommand{\size}[1]{\left| #1 \right|}
\newcommand{\zx}[1]{(\z/#1\z)^{\times}}   \newcommand{\zn}[1]{\z/#1\z}   \newcommand{\pr}[1]{\textbf{Problem #1.}}   \newcommand{\abc}{(\alph*)}
\newcommand{\nsg}{\mathrel{\unlhd}}   \newcommand{\ind}{\parindent24pt}   \newcommand{\vn}{\varnothing}
\newcommand{\ve}{\varepsilon}   \newcommand{\im}{\textnormal{im }}   \newcommand{\re}{\textnormal{Re }}   \newcommand{\mb}[1]{\mathbf{#1}}
\newcommand{\lra}{\leftrightarrow}   \newcommand{\0}{\mathbf{0}}   \newcommand{\mc}[1]{\mathcal{#1}}   \newcommand{\hra}{\hookrightarrow}   \newcommand{\hla}{\hookleftarrow}
\newcommand\myeq{\mathrel{\overset{\makebox[0pt]{\mbox{\normalfont\tiny\sffamily \textrm{def}}}}{=}}}
\newcommand\lheq{\mathrel{\overset{\makebox[0pt]{\mbox{\normalfont\tiny\sffamily \textrm{L'H}}}}{=}}}
\newcommand{\mymatrix}[2]{\left( \begin{array}{#1} #2 \end{array} \right)}   \newcommand{\myvec}[1]{\left( \begin{array}{c} #1 \end{array} \right)}

\newcommand{\hm}{homomorphism}   \newcommand{\hms}{homomorphisms}   \newcommand{\iso}{isomorphism}
\newcommand{\isos}{isomorphisms}   \newcommand{\auto}{automorphism}   \newcommand{\autos}{automorphisms}   \newcommand{\ds}[2]{#1^{(#2)}}   \newcommand{\lcs}[2]{#1^{[#2]}}
\newcommand{\pf}[1]{$ #1 = p_1^{e_1} p_2^{e_2} \cdots p_r^{e_r}$, with $p_1,p_2,\dots,p_r$ distinct primes and $e_1,e_2,\dots,e_r\in \N$}
\newcommand{\inn}{\textnormal{Inn}}   \newcommand{\out}{\textnormal{Out}}   \newcommand{\car}{\textnormal{ char }}   \newcommand{\id}{\textnormal{id}}   \newcommand{\triv}{\{e\}}
\newcommand{\tl}{\triangleleft}   \newcommand{\sd}[1]{\rtimes_{#1}}   \newcommand{\x}{^{\times}}   \newcommand{\cyc}[1]{\begin{pmatrix} #1 \end{pmatrix}}
\newcommand{\gen}[1]{\langle #1 \rangle}   \newcommand{\stab}[2]{\tn{Stab}_{#1}(#2)}   \newcommand{\fix}[2]{\tn{Fix}_{#1}(#2)}   \newcommand{\op}{^{\tn{op}}}
\newcommand{\hooklongrightarrow}{\lhook\joinrel\longrightarrow}   \newcommand{\twoheadlongrightarrow}{\relbar\joinrel\twoheadrightarrow}
\newcommand{\ses}[5]{1 \longrightarrow #1 \overset{#2}{\hooklongrightarrow} #3 \overset{#4}{\twoheadlongrightarrow} #5 \longrightarrow 1}
\newcommand{\mses}[5]{0 \longrightarrow #1 \overset{#2}{\hooklongrightarrow} #3 \overset{#4}{\twoheadlongrightarrow} #5 \longrightarrow 0}
\renewcommand{\arrowvert}{\arrow}   \renewcommand{\i}{\mathbf{i}}   \renewcommand{\j}{\mathbf{j}}   \renewcommand{\k}{\mathbf{k}}    \renewcommand{\H}{\mathbb{H}}  \renewcommand{\hom}{\tn{Hom}}
\newcommand{\ann}[2]{\textnormal{Ann}_{#1}(#2)}   \newcommand{\rk}{\textnormal{rk}}


\DeclareMathOperator{\pow}{\mathcal{P}}   \DeclareMathOperator{\C}{\mathbb{C}}
\DeclareMathOperator{\col}{\mathcal{C}}   \DeclareMathOperator{\F}{\mathbf{F}}   \DeclareMathOperator{\h}{\mathbb{H}}   \DeclareMathOperator{\bF}{\mathbf{F}}
\DeclareMathOperator{\R}{\mathbb{R}}   \DeclareMathOperator{\N}{\mathbb{N}}   \DeclareMathOperator{\z}{\mathbb{Z}}   \DeclareMathOperator{\Q}{\mathbb{Q}}
\DeclareMathOperator{\ra}{\rightarrow}   \DeclareMathOperator{\Poly}{\mathbf{P}}   \DeclareMathOperator{\spn}{\textnormal{span}}   \DeclareMathOperator{\aut}{\textnormal{Aut}}
\DeclareMathOperator{\znx}{(\z/n/Z)^{\times}}   \DeclareMathOperator{\lcm}{\textrm{lcm}}   \DeclareMathOperator{\inv}{^{-1}}   \DeclareMathOperator{\sub}{\subseteq}

\newenvironment{prf}{\paragraph{\textit{Proof}}}{\hfill$\square$}

\newcommand{\vs}{\vspace{8pt}}
\newcommand{\hs}{\hspace{8pt}}

\numberwithin{counter}{chapter}

\title{Algebra}
\author{ Transcribed from the lectures of \\ \ \\ Professor Peter Abramenko \\ \ \\ University of Virginia}
\date{Fall 2016}


\begin{document}

\frontmatter
\maketitle
\tableofcontents
\mainmatter

\ \vspace{100pt}
\begin{quote}
\centering
\textit{A study of groups, rings, fields, modules, tensor products, and multilinear functions.}
\end{quote}

\part{Group Theory}


\part{Commutative Rings}


\part{Modules}

\chapter{\null \quad \ Basic Concepts}

In the following, $R$ always denotes a (not necessarily commutative) ring with 1.

\vs

\begin{defn}
An abelian group $(M,+)$ together with a map $R \times M \ra M$, $(r,m) \mapsto rm$, is called a \tb{left $\mb{R}$-module} if
\begin{enumerate}
\item[(1)] $(r+s)m = rm + sm$
\item[(2)] $r(m+n) = rm + rn$
\item[(3)] $(rs)m = r(sm)$
\item[(4)] $1 m = m$
\end{enumerate}
for all $r,s \in R$ and $m,n \in M$. It follows from these conditions that
\begin{enumerate}
\item[$\bullet$] $0_R m = 0_M$
\item[$\bullet$] $r0_m = 0_m$
\item[$\bullet$] $(-1)m = -m$
\end{enumerate}
for all $m \in M$, $r \in R$.
\end{defn}

\vs

\begin{example}\
\begin{enumerate}
\item[(a)] If $R$ is a field, then the $R$-modules are precisely the $R$-vector spaces.
\item[(b)] Any abelian group $(M,+)$ is a (left) $\z$-module with the scalar multiplication defined by $k m = m + m + \dots + m $ ($k$ times) and $-k m = -m -m - \dots - m $ ($k times$).
\item[(c)] $\{0\}$ is an $R$-module for any ring $R$.
\item[(d)] $R$ is (left) $R$-module.
\item[(e)] For $n \in \N$, and $R^n := \left\{ \myvec{r_1 \\ \vdots \\ r_n} \bigg| r_i \in R \right\}$ with componentwise addition and scalar multiplication is a left $R$-module.

For (f) and (g) below, $F$ denotes a field and $V = F^n$.

\item[(f)] $V$ is a $M_n(F)$-module with matrix multiplication.
\item[(g)] Fix $A \in M_n(F)$. Then $V$ is an $F[x]$-module with $f(x) v := f(A) v$. We denote this module by $_A V$.
\end{enumerate}
\end{example}

\vs

From now on, $M$ denotes an $R$-module.

\vs

\begin{defn}
A subgroup $N$ of $M$ is called an ($R$-)submodule of $M$, denoted $N \leq M$, if $rn \in N$ for all $r \in R$ and $n \in N$. A subset $N \sub M$ is therefore a submodule if
\begin{enumerate}
\item[(1)] $0_m \in N$
\item[(2)] $n + n' \in N$ for all $n,n' \in N$
\item[(3)] $rn \in N$ for all $r \in R$, $n \in N$
\end{enumerate}
A submodule of the left $R$-module $R$ is called a \tb{left-ideal} of $R$. If $R$ is commutative, then any left ideal is an ideal.
\end{defn}

\vs

\begin{defn}
Let $S \sub M$. Define the \tb{annihilator of $\mb{S}$ in $\mb{R}$} by
	\[\ann{R}{S} := \{ r \in R \mid r s = 0 \ \forall \ s \in S \} \leq R \]
If $S \leq M$, then $\ann{R}{S}$ is a two-sided ideal of $R$. Indeed, for $a \in \ann{R}{S}, x \in S, r \in R$, $(ar)x = a(rx) = 0$ and $(ra)x = r(ax) = r0 = 0$, so $ar,ra \in \ann{R}{S}$.
\end{defn}

\vs

\begin{defn}
Let $M,N$ be $R$-modules. A map $\phi : M \ra N$ is called an \tb{$\mb{R}$-module homomorphism} or \tb{$\mb{R}$-linear} if $\phi(m+m') = \phi(m) + \phi(m')$ and $\phi(rm) = r\phi(m)$ for all $m,m' \in M$ and $r \in R$. Clearly, $\ker \phi := \phi\inv(0_N) \leq M$, $\im \phi \leq N$, and $\phi$ is injective if and only if $\ker \phi = \{0_M\}$. $\phi$ is called an \tb{$\mb{R}$-module isomorphism} if $\phi$ is bijective, in which case $\phi\inv : N \ra M$ is also an $R$-module isomorphism.
\end{defn}

\vs

\begin{lemma}
Let $\phi : M \ra N$ be $R$-linear.
\begin{enumerate}
\item[(a)] If $M' \leq M$, then $\phi(M') \leq N$, and if $N' \leq N$, then $\phi\inv(N') \leq M$.
\item[(b)] (Correspondence Theorem) Assume $\phi$ is surjective. Then $\phi$ induces a bijection $\{M' \leq M \mid \ker \phi \leq M\} \ra \{N' \leq N\}, M' \mapsto \phi(M')$ with inverse $N' \mapsto \phi\inv(N')$.
\end{enumerate}
\end{lemma}

\begin{proof}
(a) is straightforward. With (a) established, the induced maps in (b) are well-defined. If $N' \leq N$, then $\phi \phi\inv(N') \sub N'$ (always). To show reverse inclusion, let $x \in N'$. There exists $y \i m$ with $x = \phi(y) \implies y \in \phi\inv(N') \implies x \in \phi \phi\inv(N')$.

Now, let $\ker \phi \leq M' \leq M$. $M' \sub \phi\inv \phi(M')$ always. To show reverse inclusion, let $x \in \phi\inv \phi(M')$. Then $\phi(x) \in \phi(M')$, so there exists $m \in M'$ with $\phi(x) - \phi(m) \implies x-m \in \ker \phi \leq M' \implies x \in M'$.
\end{proof}

\vs

\begin{defn}
If $N \leq M$, the \tb{quotient module} $M/N$ is the abelian quotient group $M/N$ with scalar multiplication defined by $r(m+N) := rm + N$ (well-defined). The map $\pi : M \ra M/N$, $m \mapsto m+N$, is an $R$-linear surjection.
\end{defn}

\vs

\begin{corollary}
Each submodule $L$ of $M/N$ can be uniquely written in the form $L = M'/N$ for some $N \leq M' \leq M$, namely $M' = \pi\inv(L)$.
\end{corollary}

\vs

\begin{proposition}[Isomorphism Theorem for Modules]\
\begin{enumerate}
\item[(a)] If $\phi : M \ra M'$ is $R$-linear, then $M/\ker \phi \cong \im \phi$ via $m + \ker \phi \mapsto \phi(m)$.
\item[(b)] If $L,N \leq M$, then $L+N := \{\ell + n \mid \ell \in L, n \in N\} \leq M$, and $(L+N)/N \cong L / L \cap N$ (consider $L \ra (L+N)/N, \ell \mapsto \ell + N$).
\item[(c)] If $N \leq L \leq M$, then $(M/N)/(L/N) \cong M/L$ ($M/N \ra L/N$, $m+N \mapsto m+L$).
\end{enumerate}
\end{proposition}

\vs

\begin{defn}\
\begin{enumerate}
\item[(a)] For $R$-modules $M,N$, we set $\hom_R(M,N) := \{f : M \ra N \mid f \tn{ is $R$-linear}\}$. Check: $\hom_R(M,N)$ is an abelian group with $(f+g)(m) := f(m) + g(m)$ for $f,g \in \hom_R(M,N)$. If $R$ is commutative, then $\hom_R(M,N)$ is an $R$-module with $(rf)(m) := r f(m)$.

\item[(b)] $\tn{End}_R(M) := \hom_R(M,M)$ is a ring with $(f \cdot g)(m) := f(g(m))$ and is called the \tb{endomorphism ring of $\mb{M}$}.
\end{enumerate}
\end{defn}

\vs

\begin{example}
Consider $R$ as a left $r$-module. We ask what is the relationship between the rings $\tn{End}_R(R)$ and $R$? Let us define two maps $\rho : R \ra \tn{End}_R(R), a \mapsto (\rho_a : r \ra ra)$ and $\sigma : \tn{End}_R(R) \ra R$, $f \mapsto f(1)$. One should verify that $\sigma \circ \rho = \id_R$ and $\rho \circ \sigma = \id_{\tn{End}_R(R)}$. \\

$\rho$ is clearly additive, but $\rho_{ab} = \rho_b \circ \rho_a$ instead of $\rho_{ab} = \rho_a \circ \rho_b$. Thus $\rho$ is not a ring homomorphism, but it is very close to one. We now introduce the "opposite ring" $R\op$, which is the same abelian group as $R$ with multiplication reversed, i.e., $a \times b = ba$. One should verify that $(R,+,\times)$ is a ring with 1. We conclude that the map $\rho : \tn{End}_R(R) \ra R\op$, $a \mapsto (\rho_a : r \mapsto ra)$, is a ring isomorphism.
\end{example}

\vs

\begin{defn}
For $m_1,\dots,m_n \in M$, we set
	\[\gen{m_1,\dots,m_n}_R = \left\{\sum_{i=1}^n r_i m_i \mid r_i \in R \right\} \leq M \]
which is called the \tb{submodule of $\mb{M}$ generated by $\mb{m_1,\dots,m_n}$}. This is the smallest submodule of $M$ containing $m_1,\dots,m_n$. We say that $m_1,\dots,m_n$ \tb{generate} or \tb{span} $M$ if $M = \gen{m_1,\dots,m_n}_R$, and in this case we say $M$ is \tb{finitely generated}. $M$ is called \tb{cyclic} if $M = \gen{m}_R$ for some $m \in M$, and we often write $M = Rm$. \\

If $S = \{m_i \mid i \in I\} \sub M$, we define
	\[\gen{S}_R := \bigcup_{S' \sub S, S' \tn{ finite}} \tn{S'}_R = \left\{\sum_{i \in I} r_i m_i \mid \tn{all } r_i \in R, \tn{ almost all $r_i = 0$} \right\} \]
Check: $\gen{S}_R$ is the smallest submodule of $M$ containing $S$.
\end{defn}

\vs


\begin{remark}\
\begin{enumerate}
\item[(a)] If $M$ is cyclic and $m \in M$ with $M = Rm$, we consider the surjective $R$-linear map $\phi : R \ra M, r \mapsto rm$. By 3.1.9,
	\[M \cong R/ \ker \phi = M/ \ann{R}{m} \]
If $R$ is commutative, then $\ann{R}{m} = \ann{R}{M}$, but this is not true in general.

\begin{example*}
Let $R = M_n(F)$ for $F$ a field, and consider $V = F^n$ as an $R$-module. Let $m = e_1 = \mymatrix{c}{1 \\ 0 \\ \vdots \\ 0}$. Then $V = Rm$ is a cyclic $R$-module, but
	\[\ann{R}{e_1} = \left\{\mymatrix{cccc}{0 & \ast & \cdots & \ast \\ 0 & \ast & \cdots & \ast \\ \vdots & \vdots & \ddots & \vdots \\ 0 & \ast & \cdots & \ast} \in M_n(F) \right\} \ne \{O\} = \ann{R}{V} \]
\end{example*}
\item[(b)] If $M = \gen{m_1,\dots,m_n}_R$ is finitely generated, then $M$ is the quotient of $R^n$ for some $m \in \N$. Indeed,
	\[\phi : R^n \ra M, \quad \mymatrix{c}{r_1 \\ r_2 \\ \vdots \\ r_n} \mapsto \sum_{i=1}^n r_i m_i \]
is $R$-linear, so $M \cong R^n / \ker \phi$.

\item[(c)] If $M$ is finitely generated, then any $R$-linear image of $M$ is also finitely generated, since $\phi(\gen{m_1,\dotsm_n}_R) = \gen{\phi(m_1),\dots,\phi(m_n)}_R$ for an $R$-linear map $\phi$ defined on $M$.
\end{enumerate}
\end{remark}

\vs

\begin{example}\
\begin{enumerate}
\item[(a)] $R = \gen{1}_R$ always. If $R$ is a non-Noetherian commutative ring, it has ideals which are not finitely generated. This shows that a submodule of a finitely generated ring needn't be finitely generated.

\item[(b)] $R^n = \gen{e_1,\dots,e_n}_R$ with $e_i = \mymatrix{c}{a_1 \\ a_2 \\ \vdots \\ a_n}$ where $a_j = \delta_{ij}$.

\item[(c)] Put $M = F^n$ for $F$ a field, and let $R = M_n(F)$ or $R = F[x]$ as in 3.1.2 (g). Regardless, $V = \gen{e_1,\dots,e_n}_R$.
\end{enumerate}
\end{example}

\vs

\begin{defn}
If $J$ is a left $R$-submodule (i.e., left ideal) of $R$, then we define
	\[JM := \gen{\{ jm \mid j \in J, m \in m\}}_R = \left\{ \sum_{\tn{finite}} j_i m_i \mid j_i \in J, m_i \in M \right\} \]
\end{defn}

\vs

\begin{remark}
If $J$ is a two-sided ideal ($J \nsg R$), then $R/J$ is a ring with well-defined multiplication $(r+j)(s+j) = rs +J$, and $M/JM$ becomes an $(R/J)$-module with well-defined scalar multiplication
	\[(r+J)(m+JM) = rm + JM \]
\end{remark}

\subsection*{Direct Sums and Products}

\vs

\begin{defn}
The (external) \tb{direct sum} $M \oplus N$ of the left $R$-modules $M,N$, which is also the \tb{direct product} $M \times N$, is the group $M \oplus N$ with scalar multiplication $r(m,n) := (rm,rn)$.
\end{defn}

\vs

\begin{proposition}
For $M$ with submodules $L,N$, the following are equivalent:
\begin{enumerate}
\item[(i)] $L+N = M$ and $L \cap N = \{0\}$.
\item[(ii)] Each $m \in M$ can be written uniquely in the form $m = \ell + n$ for $\ell \in L$ and $n \in N$.
\item[(iii)] $M \cong L \oplus N$ (external direct sum) via $(\ell,n) \mapsto \ell + n$.
\end{enumerate}
\end{proposition}

\begin{proof}
Straightforward.
\end{proof}

\vs

\begin{example*}\
\begin{enumerate}
\item[(a)] $R^2 = R \oplus R$ (external)  $= \{(r,0)\} \oplus \{(0,r')\}$ (internal)
\item[(b)] $R^ = R \oplus R^{n-1} = R \oplus R \oplus \dots \oplus R$
\item[(c)] $\z$ is not the direct sum of two nonzero $\z$-submodules, since if $\{0\} \lneq L,N \leq \z$, then $L \cap N \ne \{0\}$.
\end{enumerate}
\end{example*}

\vs

\begin{defn}
An $R$-module $M$ is called \tb{indecomposable} if it cannot be written as the direct sum of two nonzero submodules (e.g., $\z$). $M \ne \{0\}$ is called \tb{irreducible} or \tb{simple} if $\{0\}$ and $M$ are the only submodules of $M$ (irreducible $\implies$ indecomposable).
\end{defn}

\vs

We can generalize in a straightforward way the construction of direct sums with finitely many summands: $\bigoplus_{i=1}^n M_i :+ \{(m_1,\dots,m_n) \mid m_i \in M_i\}$ (external direct sum). For $M_1,\dots,M_n \leq M$, $M = \bigoplus_{i=1}^n M_i$ (internal direct sum) iff $M = \sum_{i=1}^n M_i$ and $M_i \cap \sum_{1 \leq j \leq n, j \ne i} M_j = \{0\}$.

\vs

\begin{defn}
Let $I$ be any (possibly infinite) index set and $(M_i \in I)$ a family of $R$-modules. The \tb{direct product} of $(M_i \mid i \in I)$ is the Cartesian product $\prod_{i \in I} M_i$ with componentwise addition and scalar multiplication. The \tb{direct sum} $\bigoplus_{i=1}^n M_i$ is the submodule of $\prod{i \in I} M_i$ consisting of all $(m_i)_{i \in I} \in \prod_{i \in I} M_i$ such that $m_i = 0$ for almost all $i \in I$.
\end{defn}

\vs

We define the following $R$-module homomorphisms
\begin{align*}
\pi_j & : \prod_{i \in I} M_i \ra M_j, \quad (m_i)_{i \in I} \mapsto m_j \\
\iota_j &: M_j \ra \bigoplus_{i \in I} M_i,  \quad m \mapsto (\delta_{ij}m)_{i \in I}
\end{align*}

\vs

\begin{remark}
The direct product and direct sum of $R$-modules are characterized by the following universal properties.
\begin{enumerate}
\item[(a)] (Universal Property of the Direct Product) For any $R$-module $N$ and family $(\phi_j)_{j \in I}$ of $R$-module homomorphisms $\phi_j : N \ra M_j$, there exists a unique homomorphism $\phi : N \ra \prod_{i \in I} M_i$ such that $\pi_j \circ \phi = \phi_j$ for all $j \in I$. Namely, $\phi(n) = (\phi_j(n))_{j \in I}$. \quad
\begin{tikzcd}
N \arrow[dotted]{r}{\exists \ ! \ \phi}
\arrow[swap]{d}{\phi_j} & \prod_{i \in I} M_i
\arrow{dl}{\pi_j} \\
M_j
\end{tikzcd}

\item[(b)] (Universal Property of the Direct Sum) For any $R$-module $N$ and family $(\phi_j)_{j \in I}$ of $R$-module homomorphisms $\phi_j : M_j \ra N$, there exists a unique homomorphism $\phi : \bigoplus_{i \in I} M_i \ra N$ such that $\phi \circ \iota_j = \phi_j$ for each $j \in I$. Namely, $\phi((m_i)_{i \in I}) = \sum_{i \in I} \phi_i(m_i)$. \quad
\begin{tikzcd}
N & \bigoplus_{i \in I} M_i \arrow[dotted,swap]{l}{\exists \ ! \ \phi} \\
M_j \arrow{u}{\phi_j} \arrow[hookrightarrow,swap]{ur}{\iota_j}
\end{tikzcd}
\end{enumerate}
\end{remark}

\vs

\begin{example*}
Let $M$ be an $R$-module and $(m_i)_{i \in I}$ a family of elements of $M$. For each $i \in I$, define $\phi_i : R \ra M$ by $r \mapsto rm_i$. By the universal property (b) above, there exists a unique homomorphism $\phi : \bigoplus_{i \in I} R \ra M$ such that $\phi((r_i)_{i \in I}) = \sum_{i \in I} r_i m_i$.
\end{example*}

\vs

\begin{lemma}
Let $(M_i)_{i \in I}$ be a family of $R$-modules and $N$ another $R$-module. Then
\begin{enumerate}
\item[(a)] $\hom_R(\bigoplus_{i \in I} M_i,N) \cong \prod_{i \in I} \hom_R(M_i,N)$
\item[(b)] $\hom_R(N,\prod_{i \in I} M_i) \cong \prod_{i \in I} \hom_R(N,M_i)$
\end{enumerate}

These isomorphisms are as abelian groups for arbitrary rings and as $R$-modules for commutative rings $R$.
\end{lemma}

\begin{proof}\
\begin{enumerate}
\item[(a)] The bijective correspondence is given as follows. To each $(\phi_i)_{i \in I} \in \prod_{i \in I} \hom_R(M_i,N)$, we associate the unique $\phi \in \hom_R(\bigoplus_{i \in I} M_i,N)$ granted by the universal property of the direct sum. Conversely, each $\phi \in \hom_R(\bigoplus_{i \in I} M_i,N)$ is uniquely determined by $(\phi \circ \iota_i)_{i \in I} \in \prod_{i \in I} \hom_R(M_i,N)$. It is routine to verify that this correspondence is additive and that it is $R$-linear when $R$ is commutative.

\item[(b)] To each $(\phi_i)_{i \in I} \in \prod_{i \in I} \hom_R(N,M_i)$, we associate the unique $\phi \in \hom_R(N,\prod_{j \in I} M_j)$ granted by the universal property of the direct product. Conversely, each $\phi \in  \hom_R(N,\prod_{j \in I} M_j)$ is uniquely determined by $(\pi_i \circ \phi)_{i \in I} \in \prod_{i \in I} \hom_R(N,M_i)$. It is again straightforward to verify that this correspondence is additive and that it is $R$-linear when $R$ is commutative.
\end{enumerate}
\end{proof}

\vs

\subsection*{Free Modules}

\vs

\begin{defn*}
Let $M$ be an $R$-module. Elements $m_1,\dots,m_n \in M$ are called \tb{linearly independent} if for all $r_1,\dots,r_n \in R$, we have that
	\[\sum_{i = 1}^n r_i m_i = 0 \iff r_1 = r_2 = \dots = r_n = 0 \]
More generally, a subset $S \sub M$ is called \tb{lienarly independent} if every finite subset of $S$ is linearly independent.
\end{defn*}

\vs

\begin{remark}
If $S = \{m_i \mid i \in I\} \sub M$ is linearly independent, then the map $\bigoplus_{i \in I} R \ra \gen{S}_R \sub M$, $(r_i)_{i \in I} \mapsto \sum_{i \in I} r_i m_i$ is an isomorphism.
\end{remark}

\vs

\begin{defn}
A subset $S \sub M$ is called an $\mb{R}$\tb{-basis} of the $R$-module $M$ if $\gen{S}_R = M$ and $S$ is linearly independent. Such a module $M$ admitting a basis is called \tb{free}. By convention, $\{0\}$ is a free $R$-module with basis $\vn$.
\end{defn}

\vs

\begin{example}\
\begin{enumerate}
\item[(a)] If $R$ is a \emph{skew field}, then any $R$-module (i.e., $R$-vector space) is free (the same argument as for vector spaces over a field).
\item[(b)] For any ring $R \ne \{0\}$, the left $R$-module $R$ is free with basis $\{1\}$.
\item[(c)] For $R \ne \{0\}$, $\bigoplus_{i \in I} R$ is free with basis $\{e_i \mid i \in I\}$, where $e_j = (\delta_{ij})_{i \in I}$. If $I$ is finite with $|I| = n \in \N$, then $\bigoplus_{i \in I} R \cong R^n$.

\tb{Warning:} If $I$ is infinite, the $R$-module $\prod_{i \in I} R$ is NOT generally free. As an example, see Exercise 24 on page 358 of [DF]. Here, $R = \z$, and one shows that $\prod_{i \in \z^+} M_i = \prod_{i \in \N} \z$ is not a free $\z$-module. The proof of this involves some set theory, e.g., countable unions of countable sets are countable sets and $\{(a_i)_{i \in \N} \mid a_i \in \{0,1\}\}$ is uncountable. In (c) at the end, it should read "depending on $\ov{x}$".

\item[(d)] For $2 \leq n \in \N$, $\z / n\z$ is not a free $\z$-module since $n x = 0$ for all $x\ in \z / n\z$.

\item[(e)] $(\Q,+)$ is not a free $\z$-module since
	\begin{enumerate}
	\item[(i)] $\Q$ is not finitely generated (in particular, is not cyclic)
	\item[(ii)] Any $S \sub \Q$ with $|S| \geq 2$ is $\z$-linearly dependent.
	\end{enumerate}
\end{enumerate}
\end{example}

\vs

\begin{proposition}
For $S = \{m_i \mid i \in I\} \sub M$, the following are equivalent:
\begin{enumerate}
\item[(i)] $S$ is an $R$-basis of $M$.
\item[(ii)] The $R$-module homomorphism $\phi : \bigoplus_{i \in I} R \ra M, (r_i)_{i \in I} \mapsto \sum_{i \in I} r_i m_i$, is an isomoprhism.
\item[(iii)] Every element in $M$ has a unique representation of the form $m = \sum_{i \in I} r_i m_i$ where $r_i \in R$ and $r_i = 0$ for almost all $i \in I$.
\item[(iv)] (Universal Property of Free Modules) For any $R$-module $N$ and any map $f : S \ra N$, there exists a unique homomorphism $\phi : M \ra N$ such that $\phi|_S = f$. \quad
\begin{tikzcd}
S \arrow[hookrightarrow]{r}
\arrow[swap]{d}{f} & M \arrow[dotted]{dl}{\exists \ ! \ \phi} \\
N
\end{tikzcd}
\end{enumerate}
\end{proposition}

\vs

\begin{corollary}\
\begin{enumerate}
\item[(a)] Every free $R$-module $M$ is isomorphic to $\bigoplus_{i \in I} R$ for some set $I$.
\item[(b)] If $M,M'$ are two free $R$-modules with bases $S,S'$ such that $|S| = |S'|$, then $M \cong M'$.
\end{enumerate}
\end{corollary}

\vs

\begin{remark}[Rank of a Free $R$-module]
If $M$ is a free $R$-module and $B,B'$ are two bases of $M$, it is not generally true that $|B| = |B'|$. As an example, see Exercise 27 on page 358 of [DF], which provides a ring $R$ such that $R \cong R^n$ for all $n \in \N$. However, for a free $R$-module $M$ with bases $B,B'$, one can conclude that $|B| = |B'|$ in the following cases:
\begin{enumerate}
\item[(i)] $R$ is a skew field.
\item[(ii)] $R$ is commutative (Exercise)
\item[(iv)] If $B$ or $B'$ is infinite (Exercise: $B$ infinite $\implies$ $M$ is not finitely generated).
\end{enumerate}

In each of these cases, we can well-define the \tb{rank} of $M$ to be $\tn{rk}_R(M) = |B|$ for any basis $B$ of $M$. E.g., $\tn{rk}_n(R^n) = n$ if $R$ is commutative. If $M$ is not finitely generated, we simply write $\tn{rk}_R(M) = \infty$. There are several facts from linear algebra which are not generally true for free modules which are worth noting. If $M$ is a free $R$-module, then
\begin{enumerate}
\item[$\bullet$] a maximal linearly independent set needn't be a basis;
\item[$\bullet$] a minimal spanning set needn't be a basis;
\item[$\bullet$] a submodule $N$ of $M$ needn't have a complement (i.e., $L \leq M$ such that $M = L \oplus N$).
\end{enumerate}

To see why each of these are true, just consider the $\z$-module $\z$.
\end{remark}

\vs

\begin{example}
For any ring $R$ any $n \in \N$, the map $\alpha : \tn{End}_R(R^n) \ra M_N(R\op)$, $\phi \mapsto (\phi(e_1),\dots,\phi(e_n))$, is an isomorphism. In particular, $\alpha$ is bijective by 3.1.26 (iv).
\end{example}

\vs

\subsection*{Dual Modules}

\vs

\begin{defn}
The \tb{dual} $M^*$ of the $R$-module $M$ is defined as $M^* :+ \hom_R(M,R)$, where we think of $R$ as a left $R$-module. By 3.1.10, $M^*$ is an abelian group and is an $R$-module if $R$ is commutative.
\end{defn}

\vs

\begin{defn}[and Lemma]
Let $R$ be a commutative ring with $1 \ne 0$.
\begin{enumerate}
\item[(a)] $(R^n)^* \cong R^n$ as $R$-modules.
\item[(b)] If $M$ is free with basis $B = \{b_i \mid i \in I\}$, we define $b_i^* \in M^*$ by $b_i^*(b_j) = \delta_{ij}$ (well-defined by 3.1.26 (iv)). Then $B^* := \{b_i^* \mid i \in I\}$ is linearly independent, and $B^*$ is a basis of $M^*$ (called the \tb{dual basis} to $B$) if $I$ is finite.
\end{enumerate}
\end{defn}

\begin{proof}
\begin{enumerate}\
\item[(a)] $(R^n)^* = \hom_R\left(\bigoplus_{i=1}^n R, R\right) \overset{3.1.22 \ (v)}{\cong} \prod_{i=1}^n \hom_R(R,R) \cong \bigoplus_{i=1}^n R = R^n$.

\item[(b)] Suppose $\sum_{i \in I} r_i e_{i}^* = 0$ in $M^*$ for some $r_i \in R$ with $r_i = 0$ for almost all $i \in I$. Then for all $j \in I$, we have $0 = \sum_{i \in I} r_i e_i^*(e_j) = r_j$, so $B^*$ is linearly independent. Now suppose that $I$ is finite, and let $f \in M^*$. Put $a_i = f(e_i) \in R$ for all $i \in I$, and consider $f':= \sum_{i \in I} a_i e_i^*$. Then $f(e_j) = f'(e_j)$ for all $j \in I \implies f = f'$.
\end{enumerate}
\end{proof}

\vs

\begin{remark}
If $B = \{e_i \mid i \in I \}$ is an infinite basis, we still get, as in 3.1.31 (a), that $M^* \cong \prod_{i \in I} R$. However, this needn't be a free $R$-module any longer (e.g., take $R = \z$, $I = \N$), and even if it is free, it needn't be isomorphic to $M$. For example, take $R = \Q$, $I = \N$, $M$ the countable vector space $\bigoplus_{i \in \N} \Q$). Then $M^* \cong \prod_{i \in \N} \Q$ is uncountable.
\end{remark}

\vs





\chapter{\null \quad Modules of Fractions}

We now take $R$ to be a commutative ring with $1 \ne 0$. In II.2, we looked at a multiplicatively closed subset $D \sub R$ (so $1 \in D$) which allowed us to define the \emph{ring of fractions} $D\inv R = \left\{\frac{r}{d} \mid r \in R, d \in D\right\}$. Recall that we have a canonical ring homomorphism $j : R \ra D\inv R, r \mapsto \frac{r}{1}$ with
	\[\ker j = \{r \in R \mid \exists \ d \in D \tn{ such that } dr = 0\} \ (= R \iff 0 \in D) \]
If $R$ is an integral domain and $0 \notin D$, then $j$ is injective, and when we take $D = R \bs \{0\}$, we call $D\inv R$ the \emph{field of fractions} of $R$. \\

Now, given an $R$-module $M$ and $D \sub R$ multiplicatively closed, we want to construct a $D\inv R$-module $D\inv M$, called the \tb{module of fractions.} The first step in this process is to introduce an equivalence relation $\sim$ on $M \times D$ by writing $(m,d) \sim (m',d')$ if there exists $e \in D$ such that $e(d'm - dm') = 0$. The only thing to check is that $\sim$ is transitive. Suppose that $(m,d) \sim (m',d') \sim (m'',d'')$ for some $m,m',m'' \in M$ and $d,d',d'' \in D$. Then there exist elements $e,f \in D$ such that
\begin{align*}
0 &= e(d'm - dm') = f(d''m' - d'm'') \\
\implies ed'm &= edm' \quad \tn{and} \quad fd''m' = fd'm'' \\
\implies fd''ed'm &= fd''edm' = edfd''m' = edfd'm'' \\
\implies 0 &= efd'(d''m-dm'') \\
\implies (md) &\sim (m'',d'')
\end{align*}

We denote the equivalence class of $(m,d)$ by $\frac{m}{d}$ and set
	\[ D\inv M := \left\{\frac{m}{d} \mid m \in M, d \in D \right\} \]
We now define addition and $D\inv R$-scalar multiplication on $D\inv M$ by
	\[\frac{m}{d} + \frac{n}{e} = \frac{em + dn}{de}, \qquad \frac{r}{d} \cdot \frac{m}{e} = \frac{rm}{de} \]

\vs

\begin{lemma}
$D\inv M$, with addition and scalar multiplication defined as above, is a $D\inv R$-module. Via the ring homomorphism $j : R \ra D\inv R, r \mapsto \frac{r}{1}$, $D\inv M$ also becomes an $R$-module. Explicitly,
	\[r \cdot \frac{m}{d} = j(m) \cdot \frac{m}{d} = \frac{r}{1} \frac{m}{d} = \frac{rm}{d} \]
We also have the $R$-module homomorphism $j_M : M \ra D\inv M$, $m \mapsto \frac{m}{1}$, with
	\[\ker j_M = \{m \in M \mid \exists \ d \in D \tn{ such that } dm = 0 \} \leq M \]
\end{lemma}

\begin{proof}
This is a straightforward computation. To check that scalar multiplication is well-defined, suppose that $\frac{r}{d} = \frac{r'}{d'}$ and $\frac{m}{e} = \frac{m'}{e'}$ for some $r,r' \in R, d,d',e,e' \in D$, and $m,m' \in M$. Then there exist $x,y \in D$ such that
\begin{align*}
0_R &= x(d'r-dr') \quad \tn{and} \quad 0_M = y(e'm-em') \\
\implies xy(d'e'rm - der'm') &= dyde'rm - \underline{x} y \underline{d} e \underline{r'} m' \\
&= xyd'e'rm - xd'r\underline{y} \underline{e} \underline{m'} \\
&= xyd'e'rm - xd'rye'm \\
&= 0 \\
\implies \frac{rm}{de} &= \frac{r'm'}{d'e'},
\end{align*}
and the left is left to the reader.
\end{proof}

\vs

A special case of this is "localization" at a prime ideal $P \vartriangleleft R$, i.e., $D = R \bs P$. In this case, we write $M_p$ in place of $D\inv M$.

\vs

\begin{lemma}
$D\inv$ commutes with direct sums. That is, if $(M_i)_{i \in I}$ is a family of $R$-modules, then the $D\inv R$-modules $D\inv \bigoplus_{i \in I} M_i$ and $\bigoplus_{i \in I} D\inv M_i$ are isomorphic.
\end{lemma}

\begin{prf}
Consider $\phi : D\inv \bigoplus_{i\in I} M_i \ra \bigoplus_{i \in I} D\inv M_i$, $\frac{(m_i)_{i \in I}}{d} \mapsto \left(\frac{m_i}{d}\right)_{i \in I}$.
\begin{enumerate}
\item[$\bullet$] $\phi$ is well-defined. If $\frac{(m_i)_{i \in I}}{d} = \frac{(m_i')_{i \in I}}{d'}$, then there exists $e \in D$ such that
\begin{align*}
0 &= e[d'(m_i)_{i \in I} - d(m_i')_{i \in I}] = (e(d'm_i - dm_i'))_{i \in I} \\
\iff 0 &= ed'm_i - edm_i' \quad \tn{for all } i \in I \\
\iff \frac{m_i}{d} &= \frac{m_i'}{d'} \quad \tn{for all } i \in I \\
\iff \left(\frac{m_i}{d}\right)_{i \in I} &= \left(\frac{m_i'}{d'}\right)_{i \in I}
\end{align*}

\item[$\bullet$] $\phi$ is $D\inv R$-linear. Let $\frac{(m_i)_{i \in I}}{d}, \frac{(m_i')_{i \in I}}{d'} \in D\inv M, \frac{r}{e} \in D\inv R$. Then
\begin{align*}
\phi \left(\frac{(m_i)_{i \in I}}{d} + \frac{r}{e} \frac{(m_i')_{i \in I}}{d'}\right) = \phi\left( \frac{(ed'm_i + drm_i')_{i \in I}}{edd'}\right) &= \left(\frac{ed'm_i + drm_i'}{edd'}\right)_{i \in I} \\
&= \left(\frac{m_i}{d}\right)_{i \in I} + \frac{r}{e} \left(\frac{m_i'}{d'}\right)_{i \in I} \\ &= \phi \left(\frac{(m_i)_{i \in I}}{d}\right) + \frac{r}{e} \phi \left(\frac{(m_i')_{i \in I}}{d'}\right)
\end{align*}

\item[$\bullet$] $\phi$ is surjective. Let $\frac{m_i}{d_i} \in \bigoplus_{i \in I} D\inv M_i$ be given. Choose a finite subset $I' \sub I$ such that $\frac{m_i}{d_i} = 0$ for all $i \in I \bs I'$. Set $d = \prod_{i \in I'} d_i \in D$, and let $m_i' = (\prod_{j \in I'\bs\{i\}} d_j) m_i$ so that $\frac{m_i'}{d} = \frac{m_i}{d_i}$ for all $i \in I'$. If we set $m_i' = 0$ for all $i \in I \bs I'$, then clearly $\frac{m_i}{d} = \frac{m_i'}{d_i}$ for all $i \in I$.

\item[$\bullet$] $\phi$ is injective. Suppose $\phi \left( \frac{(m_i)_{i \in I}}{d} \right) = \left(\frac{m_i}{d}\right)_{i \in I} = 0$ in $\bigoplus_{i \in I} D\inv M_i$. As above, choose a finite subset $I' \sub I$ such that $m_i = 0$ for all $i \in I \bs I'$. For each $i \in I'$, $\frac{m_i}{d} = 0$ in $D\inv M_i$, so there exists $e_i \in D$ such that $e_i m_i = 0$. Set $e = \prod_{i \in I'} e_i \in D$. Then $em_i = 0$ for all $i \in I$, and hence $\frac{(m_i)_{i \in I}}{d} = 0$ in $D\inv \bigoplus_{i \in I} M_i$.
\end{enumerate}
\end{prf}

\vs

\begin{remark}
$D\inv$ does NOT generally commute with infinite direct products (Exercise).
\end{remark}

\vs

\begin{defn}
For $R$-modules $M,N$ and $\phi \in \hom_R(M,N)$, we define $D\inv \phi : D\inv M \ra D\inv N$ by $D\inv\phi \left(\frac{m}{d}\right) = \frac{\phi(m)}{d}$ (well-defined). \\

In the language of categories, $D\inv$ is in fact a \emph{covariant functor} from the category of $R$-modules to the category of $D\inv R$-modules. \\

We call a (finite or infinite) sequence of $R$-module homomorphisms
	\[...\longrightarrow M_i \overset{\phi_{I-1}}{\longrightarrow} M_i \overset{\phi_i}{\longrightarrow} M_{i+1} \longrightarrow \dots \]
is called \tb{exact} if $\im \phi_{i-1} = \ker \phi_i$ for all $i$. A \tb{short exact sequence} (SES) is an exact sequence \\ $\mses{L}{\phi}{M}{\psi}{N}$.
\end{defn}

\vs

\begin{proposition}
The functor $D\inv$ is exact. If $L \overset{\phi}{\longrightarrow} M \overset{\psi}{\longrightarrow} N$ is an exact sequence of $R$-modules, then $D\inv L \overset{D\inv \phi}{\longrightarrow} D\inv M \overset{D\inv \psi}{\longrightarrow} D\inv N$ is an exact sequence of $D\inv R$-modules.
\end{proposition}

\begin{proof}
By assumption, $\im \phi = \ker \psi \implies \psi \circ \phi = 0$, so that
	\[0 = D\inv(\psi \circ \phi) = D\inv(\psi) \circ D\inv(\phi) \implies \im D\inv \phi \sub \ker D\inv \psi \]
Now, let $\frac{m}{d} \in \ker D\inv \psi$. Then $\frac{\psi(m)}{d} = 0$ in $D\inv N$, so there exists $d' \in D$ such that $0 = d'\phi(m) = \phi(d'm) \implies d'm \in \ker \psi = \im \phi$, hence there exists $\ell \in L$ with $\phi(\ell) = d'm$. Therefore,
	\[\frac{m}{d} = \frac{d'm}{dd'} = \frac{\phi(\ell)}{dd'} = D\inv \phi \left(\frac{\ell}{dd'} \right) \in \im D\inv \phi \implies \im D\inv \phi = \ker D\inv \psi \]
\end{proof}

\vs

\begin{defn}
If $M$ is an $R$-module, an element $m \in M$ is called a \tb{torsion element} of $M$ if $rm = 0$ for some $r \in R \bs \{0\}$. Note that $0_M$ is always torsion since $1_R \ne 0_R$. We set
	\[ T(M) := \{m \in M \mid m \tn{ is a torsion element} \} \]
We say $M$ is \tb{torsion free} if $T(M) = \{0\}$.
\end{defn}

\vs

\begin{example}
If $R = \z/6\z = M$, then $T(M) = \{\ov{0},\ov{2},\ov{3},\ov{4}\}$. This shows that if $M$ is a free module, it does not necessarily follow that $M$ is torsion free. This also shows that $T(M)$ needn't be a submodule of $M$.
\end{example}

\vs

\begin{lemma}
If $R$ is an integral domain and $M$ is an $R$-module, then
\begin{enumerate}
\item[(a)] $T(M)$ is a submodule of $M$.
\item[(b)] $M/T(M)$ is torsion free.
\item[(b)] If $M$ is free, then $M$ is torsion free.
\end{enumerate}
\end{lemma}

\vs

\begin{proof}\
\begin{enumerate}
\item[(a)] If $m,m' \in T(M)$, then there exist $r,r' \in R \bs \{0\}$ such that $rm = 0 = r'm'$. Now $rr' \ne 0$ as $R$ is an integral domain, and $rr'(m + m') = r'(rm) + r(r'm') = 0 + 0 = 0$. For all $s \in R$, we have $s(rm) = s 0 = 0$.

\item[(b)] Assume that $m + T(M) \in T(M/T(M))$. Let $r \in R \bs \{0\}$ be such that $r(m + T(M)) = rm + T(M) = 0 + T(M) \iff rm \in T(M)$. Then there exists $r' \in R \bs \{0\}$ with $0 = r'(rm) = (rr')m$, and $rr' \ne 0$, so $m \in T(M) \iff m + T(M) = 0 + T(M)$.

\item[(b)] Let $B = \{m_i \mid i \in I\}$ be a basis of $M$, and let $m \in T(M)$. Write $m = \sum_{i \in I} r_i m_i$, where $r_i \in R$ and $r_i = 0$ for almost all $i \in I$. For some $r \in R \bs \{0\}$, we have
	\[0 = rm = r \sum_{i \in I} r_i m_i = \sum_{i \in I} (rr_i) m_i \implies rr_i = 0 \tn{ for all } i \in I \]
But $R$ is an integral domain and $R$ is an integral domain, so we must have that $r_i = 0$ for all $i \in I \iff m = \sum_{i \in I} r_i m_i = 0$. Thus $M$ is torsion free.
\end{enumerate}
\end{proof}

\vs

In the following, $R$ is always an integral domain ($R \ne \{0\}$).

\vs

\begin{remark}\
\begin{enumerate}
\item[(a)] If $D \sub R \bs \{0\}$ and $M$ is a torsion free $R$-module, then $j_M : M \ra D\inv M, m \mapsto \frac{m}{1}$, is injective.
\item[(b)] If $D = R \bs \{0\}$, then $\ker j_M = T(M)$.
\end{enumerate}
From now on, $D$ will always be $R \bs \{0\}$. Set $F := D\inv R$, the "field of fractions" of $R$. Note that if $M$ is an $R$-module, then $D\inv M$ is an $F$-vector space.
\end{remark}

\vs

\begin{defn}
For $M$ an $R$-module, define its \tb{rank} as $\tn{rk}_R M = \tn{rk} M := \dim_F D\inv R$.
\begin{example*}
If $M = T(M)$, then $D\inv M = \{0\} \implies \tn{rk} M = 0$. This can occur when $R = \z$ and $M = \bigoplus_{n \in \N} \z/n\z, M = \prod_{n \in \N} \z/2\z$, or $M = \Q/\z$.
\end{example*}
\end{defn}

\vs

\begin{lemma}
If $\mses{L}{}{M}{}{N}$ is a short exact sequence of $R$-modules, then $\tn{rk}M = \tn{rk} L + \tn{rk} N$
\end{lemma}

\begin{proof}
By 3.2.5, $\mses{D\inv L}{}{D\inv M}{}{D\inv N}$ is a short exact sequence of $F$-vector spaces. By the rank-nullity theorem, $\rk M = \rk L + \rk N$.
\end{proof}

Note that this lemma holds even for modules with infinite bases as the rank-nullity theorem is true for infinite-dimensional vector spaces.

\vs

\begin{corollary}\
\begin{enumerate}
\item[(a)] If $L \leq M$, then $\rk L \leq \rk M$ by considering the short exact sequence $\mses{L}{}{M}{}{M/L}$.
\item[(b)] If $M = L \oplus N$, then $\rk M = \rk L + \rk N$.
\end{enumerate}
\end{corollary}

\begin{lemma}\
\begin{enumerate}
\item[(a)] If $S$ generates the $R$-module $M$, then $j_M(S)$ generates the $F$-vector space $D\inv M$.
\item[(b)] If $M$ is torsion free, then $S \sub M$ is $R$-linearly independent if and only if $j_M(S)$ is $F$-linearly independent in $D\inv M$.
\end{enumerate}
\end{lemma}

\begin{proof} Write $S = \{m_i \in M \mid i \in I\} \implies j_M(S) = \left\{ \frac{m_i}{1} \mid i \in I \right\} \sub D\inv M$.
\begin{enumerate}
\item[(a)] Let $\frac{m}{d} \in D\inv M$. Then there exist $r_i \in R$, almost all $r_i = 0$, such that $m = \sum_{i \in I} r_i m_i$. Then
	\[\frac{m}{d} = \frac{1}{d} \frac{m}{1} = \frac{1}{d} \left[\frac{\sum_{i \in I} r_i m_i}{1}\right] = \sum_{i \in I} \frac{r_i}{d} j_M(m_i) \in \gen{j_M(S)}_F \]
\item[(b)] $[\impliedby]$ Assume that $j_M(S)$ is linearly independent and that $\sum_{i \in I} r_i m_i = 0$ for some $m_i \in M,$ $r_i \in R$, and $r_i = 0$ for almost all $i \in I$. Then
	\[0 = j_M \left(\sum_{i \in I} r_i m_i\right) = \sum_{i \in I} \frac{r_i}{1} j_M(m_i) \implies \frac{r_i}{1} = 0 \iff r_i = 0 \ \forall \ i \in I \]
$[\implies]$ Assume that $M$ is torsion free, $S$ is $R$-linearly independent, and $\sum_{i \in I} \frac{r_i}{d_i} \frac{m_i}{1} = 0$. Choose a finite subset $I' \sub I$ such that $r_i = 0$ for all $i \in I \bs I'$. Set $d = \prod_{i \in I'} d_i$. Then $\frac{r_i m_i}{d_i} = \frac{r_i' m_i}{d}$, where $r_i' = r_i \prod_{j \in I \bs \{i\}} d_i$. Thus
\begin{align*}
0 &= \sum_{i \in I} \frac{r_i}{d_i} \frac{m_i}{1} = \sum_{i \in I} \frac{r_i'}{d} \frac{m_i}{1} = \frac{1}{d} \sum_{i \in I} \frac{r_i' m_i}{1} \\
\implies 0 &= \sum_{i \in I} \frac{r_i' m_i}{1} = \sum_{i \in I} \frac{r_i' m_i}{1} = j_M\left(\sum_{i \in I} r_i' m_i\right)
\end{align*}
Now $j_M$ is injective because $M$ is torsion free, so we conclude that $\sum_{i \in I} r_i' m_i = 0 \implies r_i' = 0 \iff r_i = 0$ for all $i \in I$, since $R$ is an integral domain.
\end{enumerate}
\end{proof}

\vs

\begin{proposition}
Let $M$ be a free $R$-module with basis $B$, and let $S \sub M$.
\begin{enumerate}
\item[(a)] If $\gen{S}_R = M$, then $|S| \geq |B|$.
\item[(b)] If $S$ is $R$-linearly independent, then $|S| \leq |B|$.
\item[(c)] If $S$ is a basis of $M$, then $|S| = |B|$.
\end{enumerate}
\end{proposition}

\begin{proof}
Let $V$ be the $F$-vector space $V = D\inv M$. Because $M$ is free, 3.2.8 (c) implies that $M$ is torsion free, and thus $j_M : M \ra V$ is injective (and preserves cardinalities). By 3.2.13, $j_M(B)$ is an $F$-basis of $V$.
\begin{enumerate}
\item[(a)] $\gen{S}_R = M \overset{3.2.13 (a)}{\implies} \gen{j_M(S)}_F = D\inv M = V$. Basic linear algebra tells us that
	\[|S| = |j_M(S)| \geq |j_M(B)| = |B| \]
\item[(b)] $S$ being $R$-linearly independent $\implies j_M(S)$ is $F$-linearly independent $\overset{\tn{linear algebra}}{\implies} |S| = |j_M(S)| \leq |j_M(B) = |B|$.
\item[(c)] Follows from $(a)$ and $(b)$.
\end{enumerate}

A different argument for (c) goes as follows. Index $B$ by some set $I$, i.e., $B = \{b_i \mid i \in I\}$, so that $M \cong \bigoplus_{i \in I} R$. Then
	\[D\inv M \cong \bigoplus_{i \in I} D\inv R = \bigoplus_{i \in I} F \implies \dim_F D\inv M = \dim_F \bigoplus_{i \in I} F = |I| = |B| \]
\end{proof}

\vs

\begin{remark*}
$D\inv M \cong F \otimes_R M$ as $F$-vector spaces.
\end{remark*}

\vs

Suppose that $M$ is free and $N \leq M$, so that $\rk N \leq \rk M$. Can we conclude that $N$ is free? No. If $R$ is an integral domain that is not a PID, then there exists an ideal $I \leq R$ which is not principal. Now $R$ is a free $R$-module of rank 1. $I$ is a noncyclic submodule, so any set of generators $S$ of $I$ has at least 2 generators. But any $x,y \in I$ satisfy $(-y) x + x y = 0$, so any generating set $S$ must be linearly dependent.




\chapter{Finitely Generated Modules Over PIDs}



We now specialize to  the $R$ a PID.

\vs

\begin{remark}
Every nonzero ideal of $R$ is free with rank 1, and every nonzero submodule of a cyclic module is cyclic (hence rank is 1).
\end{remark}

\vs

\begin{lemma}
Let $M$ be an $R$-module (not necessarily torsion free). Let $0 \ne f \in M^*$. For all $m \in M$ with $f(M) = (f(m))$, we have $M = \ker f \oplus Rm$.
\end{lemma}

\begin{proof}
$f(M)$ is an $R$-submodule (ideal) of $R$. Now $R$ is a PID, so there exists $a \in f(M)$ such that $f(M) = (a)$. There exists $m \in M$ such that $a = f(m) \implies f(M) = (f(m))$.
\begin{enumerate}
\item[$\bullet$] $\ker f \cap Rm = \{0\}$. If $rm \in \ker f$, then $0 = f(rm) = r f(m) = ra \implies r = 0$.
\item[$\bullet$] $\ker f + Rm = M$. If $x \in M$, then $f(x) \in f(M) = (f(m))$, so there exists $r \in R$ such that $f(x) = r f(m) = f(rm)$. Thus $0 = f(x - rm) \implies x \in \ker f + Rm$.
\end{enumerate}
\end{proof}

\vs

\begin{proposition}
If $M$ is a finitely generated free $R$-module and $N$ is a submodule of $M$, then $N$ is free.
\end{proposition}

\begin{proof}
We proceed by induction on $n = \rk M$. For $n = 1$, see Remark 3.3.1. Suppose that $B = \{e_1,\dots,e_n\}$ is a basis of $M$. Define the surjective homomorphism $f : M \ra R, \sum_{i=1}^n r_i m_i \mapsto m_1$. By $3.3.2$, $M = \ker f \oplus re_1$, since $f(M) = R = (1) = (f(e_1))$. Note that $\ker f = \{e_2,\dots,e_n\}$ is a free $R$-module of rank $n-1$. \\

If $f|_N = 0$, then $N \sub \ker f \implies N$ is free by the induction hypothesis. If $f|_N \ne 0$, then $f(N) = f(y)$ for some $y \in N$ with $f(y) \ne 0 \implies y \ne 0$. By 3.3.2,
	\[ N = \ker f|_N \oplus Ry = (\ker f \cap N) \oplus Ry \tag{$\ast$} \]
By applying the induction hypothesis to $\ker f$, we get that $\ker f \cap N \leq \ker f$ is free, say with basis $\{y_2,\dots,y_m\} \implies \{y,y_2,\dots,y_m\}$ is a basis of $N$ by $(\ast)$.
\end{proof}

\vs

\begin{remark}
If $M$ is any free $R$-module, then so is any submodule ($R$ is a PID). For a proof of this fact, see Rotman's \emph{Advanced Modern Algebra} Theorem 9.8 on page 650.
\end{remark}

\vs

Recall that a commutative ring $R$ is \tb{Noetherian} iff every ideal of $R$ is finitely generated iff $R$ satisfies the ascending chain condition on ideals iff any nonempty set of ideals of $R$ has a maximal element. In particular, any PID is Noetherian.

\vs

\begin{theorem}[Compatible Basis Theorem]
Let $M$ be a free $R$-module ($R$ a PID) of finite rank $n$ and let $N$ be a submodule of $M$. Then there is a basis $B = \{x_1,x_2,\dots,x_n\}$ of $M$, an integer $0 \leq m \leq n$, and elements $a_1,a_2\dots,a_m \in R \bs \{0\}$ with $a_1 \mid a_2 \mid \dots \mid a_m$ such that $\{a_1x_1,a_2x_2,\dots,a_mx_m\}$ is a basis of $N$.
\end{theorem}

\begin{proof}
We prove the claim by induction on $n = \rk M$. We assume without loss of generality that $N \ne \{0\}$. For the base case $n = 1$, see 3.3.1. Consider $\Sigma := \{f(N) \mid f \in M^*\}$, a set of ideals of $R$ containing $(0)$. But $\Sigma \ne \{(0)\}$. Indeed, pick any basis $B_0 = \{e_1,\dots,e_n\}$ of $M$ and define the "projection" $\pi_i \in M^*$ by $\pi_i(\sum_{j=1}^n r_j e_j) = e_i$ for $1 \leq i \leq n$. For at least one $i$, we must have $\pi_i(N) \ne \{0\}$ since $N \ne \{0\}$. Now, because $R$ is a PID and hence Noetherian, $\Sigma$ must have a maximal element $I \ne (0)$. Now $R$ a PID $\implies I = (a_1)$ for some $a_1 \in R \bs \{0\}$. Now $I \in \Sigma$, so there exists $y_1 \in N$ and $f_1 \in M^*$ with $f(y_1) = a_1$. By 3.3.2, $N = \ker f_1 \oplus Ry_1 (\ast)$. \\

We claim that $a_1 \mid f(y_1)$ for all $f \in M^*$. Let $f \in M^*$. Now $(a_1,f(y_1)) = (d)$ for some $d \in R$, hence there exist $r,s \in R$ such that
	\begin{align*}
	d &= ra_1 + s f(y_1) = r f_1(y_1) + s f(y_1) = (rf_1 + sf)(y_1) = f'(y_1) \\
	\implies I &= (a_1) \sub (d) = (f'(y_1)) \sub f'(N) \in \Sigma,
	\end{align*}
where $f' = rf_1 + sf \in M^*$. But $I$ is maximal in $\Sigma$, so we must have $I = f'(N)$ $\implies (a_1) = (d) = (a_1,f(y_1)) \implies $ $f(y_1) \in (a_1) \implies a \mid f(y_1)$. \\

The consequence of this fact is that there exists $x_1 \in M$ with $y_1 = a_1 x_1$. Indeed, write $y_1 = \sum_{i=1}^n r_i e_i$, so that $r_i = \pi_i(y_1)$ for each $1 \leq i \leq n$. Then, by the claim, $a_1 \mid r_i \implies$ there exists $b_i \in R$ with $r_i = b_i a_1 $ $\implies y_1 = a_1 \sum_{i=1}^n b_i e_i = a_1 x_1$, where $x_1 = \sum_{i=1}^n b_i e_i$. Then
	\begin{align*}
	a_1 &= f_1(y_1) = f_1(a_1x_1) = a_1 f_1(x_1) \\
	\implies 1 &= f_1(x_1) \\
	\implies R &= f_1(M) = (f_1(x_1)) \\
	\overset{3.3.2}{\implies} M &= \ker f_1 \oplus R x_1 \tag{$\ast \ast$}
	\end{align*}
Now $\ker f_1 \leq M \implies \ker f_1$ is free by 3.3.3, and $\rk(\ker f_1) = \rk M - 1 = n-1$ by 3.2.12(b). We apply the induction hypothesis to $\ker f_1 \cap N \leq \ker f_1$ to find a basis $\{x_2,x_3,\dots,x_n\}$ of $\ker f_1$, an integer $2 \leq m \leq n$, and elements $a_2,a_3,\dots,a_m \in R \bs \{0\}$ with $a_2 \mid a_3 \mid \dots \mid a_m$ such that $\{a_2x_2,\dots,a_mx_m\}$ is a basis of $\ker f_1 \cap N$. But then $\{a_1,x_1,\dots,a_m,x_m\}$ is a basis of $N$ by observing $(\ast)$ and $\{x_1,x_2,\dots,x_n\}$ is a basis of $M$ by $(\ast \ast)$. \\

It remains to check that $a_1 \mid a_2$. Consider $f \in M^*$ defined by $f(\sum_{i=1}^n r_i x_i) = r_1 + r_2$. Then $f(y_1) = (f(a_1x_1) = a_1$ and $f(a_2 x_2) = a_2$, so $I = (a_1) \sub (a_1,a_2) \sub f(N) \in \Sigma$, and $I$ is maximal in $\Sigma$, hence $(a_1) = (a_1,a_2) \implies a_2 \in (a_1) \implies a_1 \mid a_2$.
\end{proof}

\newpage

\begin{theorem}[Structure of Finitely Generated Modules Over PIDs]
For a finitely generated $R$-module $M$ ($R$ a PID), the following hold
\begin{enumerate}
\item[(a)] There exists a free submodule $M_0$ of $M$ with $\rk M_0 = \rk M$ such that $M = T(M) \oplus M_0$.
\item[(b)] If $M$ is torsion free, then $M$ is free.
\item[(c)] There exist elements $a_1,a_2,\dots,a_m \in R\bs(R\x \cup \{0\})$ with $a_1 \mid a_2 \mid \dots \mid a_m$ such that
	\[T(M) \cong \bigoplus_{i=1}^m R/(a_i) \]
\item[(d)] $M$ is a finite direct sum of cyclic modules.
\end{enumerate}
\end{theorem}

\begin{proof}
Choose a set $S = \{m_1,\dots,m_n\}$ which generates $M$. There is a unique linear map $\phi : R^n \ra M$ satisfying $\phi(e_i) = m_i$ for all $1 \leq i \leq n$. Hence $M \cong R^n/N$, where $N := \ker \phi$, by 3.1.9. By 3.3.5, there is a basis $B = \{x_1,\dots,x_n\}$ of $R^n$, an integer $0 \leq m \leq n$, and elements $a_1,\dots,a_m \in R \bs \{0\}$ with $a_1 \mid a_2 \mid \dots \mid a_m$ such that $\{a_1x_1,\dots,a_mx_M\}$ is a basis of $N$. Then
	\[M \cong R^n/N = \bigoplus_{i=1}^n Rx_i/\bigoplus_{i=1}^m Ra_ix_i \cong \bigoplus_{i=1}^m \frac{Rx_i}{Ra_ix_i} \oplus \bigoplus_{i=m+1}^n Rx_i \cong \bigoplus_{i=1}^m R/(a_i) \oplus R^{n-m} \]
If $a_i \in R\x$, then $R/(a_i) = \{0\}$, so we can omit this summand. We may therefore assume (renumbering, if necessary) that $a_i \in R \bs (R\x \cup \{0\})$. In summary, we have shown that there exists an isomorphism $\psi : M' := \bigoplus_{i=1}^m R/(a_i) \oplus R^{n-m} \ra M$. Note that $\bigoplus_{i=1}^n R/(a_i)$ is the torsion submodule of $M'$ (annihilated by $a_m$). Setting $M_0' = R^{n-m}$, we have that
	\[M' = T(M') \oplus M_0' \implies M = \psi(T(M') \oplus M_0') = \psi(T(M')) \oplus \psi(M_0') = T(M) + M_0, \]
where $M_0 := \psi(M_0')$ is free. It follows from 3.2.12 (b) that $\rk M = \rk T(M) + \rk M_0 = 0 + \rk M_0$. This proves (a), (b), (c), and (d).
\end{proof}

\vs

\begin{remark}\
\begin{enumerate}
\item[(a)] $M$ determines $T(M)$ uniquely but not the complement $M_0$ of $T(M)$. For example, consider \[ \z_n \oplus \z \tn{ (external direct sum) } = \z_n \oplus \z(\ov{1},1) \tn{ (internal direct sum)} \]
\item[(b)] If $M  T(M) \oplus M_0'$, then $M_0' \cong M/T(M) \cong M_0$, so also $M_0'$ is free of rank $\rk M$.

\item[(c)] If $R$ is Noetherian and $M$ is a finitely generated $R$-module, then any submodule of $M$ is again finitely generated, but $N$ might require \emph{more} generators than $M$. This is, however, not the case for $R$ a $PID$ (exercise).

\item[(d)] The implication "torsion free $\implies$ free" is not true for non-finitely generated $R$-modules. For example, take $M = \Q$ or $M = \prod_{n \in \N} \z$ as a $\z$-module.
\end{enumerate}
\end{remark}
\end{document}
